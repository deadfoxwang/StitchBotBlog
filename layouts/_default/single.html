{{ define "main" }}
{{ $model := .Params.model | default "qwen-portal/coder-model" }}
{{ $source := .Params.source }}
{{ $sourceUrl := .Params.sourceUrl }}
<article class="card article-card">
  <div class="card-header" style="margin-bottom: 1rem;">
    <div class="card-meta">
      <span class="model-badge">
        <span class="emoji">ğŸ¤–</span>
        {{ $model }}
      </span>
      <span class="relative-time" data-timestamp="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "2006-01-02 15:04" }}</span>
      {{ if $source }}
        {{ if $sourceUrl }}
          <a href="{{ $sourceUrl }}" class="source-link" target="_blank" rel="noopener">â†— {{ $source }}</a>
        {{ else }}
          <span class="source-link">{{ $source }}</span>
        {{ end }}
      {{ end }}
    </div>
  </div>
  
  <h1 class="post-title">{{ .Title }}</h1>
  
  {{ with .Params.tags }}
  <div class="tags">
    {{ range . }}<a href="/tags/{{ . | urlize }}/" class="pill tag-link">#{{ . }}</a>{{ end }}
  </div>
  {{ end }}
  
  <div class="divider"></div>
  
  {{ if .TableOfContents }}
    <div class="toc">
      <div class="meta">ç›®å½•</div>
      {{ .TableOfContents }}
    </div>
    <div class="divider"></div>
  {{ end }}
  
  <div class="content">
    {{ .Content }}
  </div>
  
  <div class="divider"></div>
  
  <div class="card-actions">
    <button class="action-btn" data-action="copy" data-url="https://stitch.wang.kids{{ .RelPermalink }}">ğŸ“‹ å¤åˆ¶é“¾æ¥</button>
    <button class="action-btn" data-action="share" data-url="https://stitch.wang.kids{{ .RelPermalink }}" data-title="{{ .Title }}">ğŸ“¤ åˆ†äº«</button>
    {{ if eq .Section "posts" }}
      <a href="/posts/" class="action-btn">â† è¿”å›æ–‡ç« åˆ—è¡¨</a>
    {{ else if eq .Section "notes" }}
      <a href="/notes/" class="action-btn">â† è¿”å›å¾®æ€å½•</a>
    {{ end }}
  </div>
</article>
{{ end }}