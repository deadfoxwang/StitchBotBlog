:root {
  --bg: #0f1115;
  --panel: #151922;
  --text: #e6e9ef;
  --muted: #8c929b;
  --line: #2a3140;
  --accent: #7c5cff;
  --accent-2: #24d2ff;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: var(--bg);
  color: var(--text);
}

a { color: inherit; text-decoration: none; }

.site-header, .site-footer { border-bottom: 1px solid var(--line); }
.site-footer { border-top: 1px solid var(--line); }

.site-inner {
  max-width: 980px;
  margin: 0 auto;
  padding: 1.2rem 1.4rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.brand a { font-weight: 700; letter-spacing: 0.06em; }
.tagline { color: var(--muted); margin-left: 0.8rem; }

.nav a { margin-left: 1rem; color: var(--muted); padding-bottom: 0.2rem; }
.nav a:hover { color: var(--text); border-bottom: 1px solid var(--accent); }
.nav a.active { color: var(--text); border-bottom: 2px solid var(--accent); }

.site-main { max-width: 980px; margin: 0 auto; padding: 2rem 1.4rem 3rem; }

.hero { margin-bottom: 1.8rem; }
.hero h1 { margin: 0 0 0.4rem 0; font-size: 2.6rem; }
.hero .lead { color: var(--muted); font-size: 1.06rem; }

.cta { margin-top: 1rem; display: flex; gap: 0.8rem; }
.btn { background: var(--accent); color: white; padding: 0.6rem 1.2rem; border-radius: 999px; font-size: 0.96rem; box-shadow: 0 6px 16px rgba(124,92,255,0.35); }
.btn.ghost { background: transparent; border: 1px solid var(--accent); color: var(--accent); box-shadow: none; }

.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
@media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

.card { background: var(--panel); border: 1px solid var(--line); border-radius: 14px; padding: 1.7rem 1.9rem; margin-bottom: 1.7rem; box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
.card.compact { padding-top: 1rem; padding-bottom: 1rem; }

.section-title { font-size: 1.32rem; letter-spacing: 0.04em; margin-top: 0; padding-bottom: 0.75rem; border-bottom: 1px solid rgba(124,92,255,0.35); }

.date-title { font-size: 1.2rem; font-weight: 700; margin-top: 0; padding-bottom: 0.45rem; border-bottom: 1px solid rgba(124,92,255,0.2); }

.item { padding: 1.15rem 0; border-bottom: 1px dashed var(--line); }
.item:last-child { border-bottom: none; }
.item-title { font-weight: 600; display: block; margin-bottom: 0.35rem; font-size: 1.08rem; }
.item-title.long { font-size: 1.22rem; font-weight: 700; }

.excerpt { color: var(--muted); margin: 0.25rem 0 0.7rem 0; line-height: 1.75; }
.excerpt.highlight { color: var(--text); }
.meta { color: var(--muted); font-size: 0.78rem; }

.more { display: inline-block; margin-top: 0.8rem; color: var(--accent); text-decoration: underline; }

.tags { margin: 0.2rem 0 0.7rem 0; }
.pill { display: inline-block; padding: 0.2rem 0.6rem; border-radius: 999px; background: rgba(124,92,255,0.14); color: #b6a7ff; font-size: 0.78rem; margin-right: 0.4rem; }
.pill.soft { background: rgba(124,92,255,0.08); color: #9ea6ff; }

.filters { margin-top: 0.6rem; }

.status-row { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.4rem; }
.dot { width: 8px; height: 8px; border-radius: 50%; background: #24d2ff; box-shadow: 0 0 8px rgba(36,210,255,0.7); }

.note-header { display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
.time { font-size: 0.74rem; }
.note-item { padding-bottom: 1.3rem; }

.post-title { font-size: 1.8rem; margin-bottom: 0.35rem; }

.content { line-height: 1.78; }

.divider { height: 1px; background: var(--line); margin: 1rem 0; }

.toc { font-size: 0.9rem; color: var(--muted); }
.toc ul { padding-left: 1.2rem; }

blockquote { border-left: 3px solid var(--accent); padding-left: 0.8rem; color: var(--muted); }

/* Code Highlighting */
pre { background: #1a1d26; padding: 1rem; border-radius: 8px; overflow-x: auto; border: 1px solid var(--line); }
code { font-family: "SF Mono", Monaco, "Cascadia Code", monospace; font-size: 0.9em; }
:not(pre) > code { background: rgba(124,92,255,0.12); padding: 0.15rem 0.4rem; border-radius: 4px; color: #b6a7ff; }
pre code { background: none; padding: 0; color: var(--text); }

/* Syntax colors */
.hljs-keyword { color: #ff7b72; }
.hljs-string { color: #a5d6ff; }
.hljs-number { color: #79c0ff; }
.hljs-comment { color: #8b949e; font-style: italic; }
.hljs-function { color: #d2a8ff; }
.hljs-variable { color: #ffa657; }
.hljs-operator { color: #ff7b72; }
.hljs-punctuation { color: #c9d1d9; }

/* Lazy loading images */
img[loading="lazy"] { opacity: 0; transition: opacity 0.3s; }
img[loading="lazy"].loaded { opacity: 1; }

.muted { opacity: 0.9; }

.layout { display: grid; grid-template-columns: minmax(0, 1fr) 280px; gap: 2rem; align-items: start; }
@media (max-width: 980px) {
  .layout { grid-template-columns: 1fr; }
  .side-panel { position: static; }
}
.main-col { min-width: 0; }
.side-panel { position: sticky; top: 1.2rem; display: flex; flex-direction: column; gap: 1.4rem; }

.view-toggle { margin-top: 1rem; display: flex; gap: 0.6rem; }
.toggle-btn { background: transparent; border: 1px solid var(--line); color: var(--muted); padding: 0.35rem 0.8rem; border-radius: 999px; font-size: 0.82rem; cursor: pointer; }
.toggle-btn.active { border-color: var(--accent); color: var(--text); box-shadow: 0 0 10px rgba(124,92,255,0.25); }

.notes-compact { display: none; }
.view-compact .notes-timeline { display: none; }
.view-compact .notes-compact { display: block; }

.topic-block { margin-bottom: 1.2rem; }
.topic-title { font-size: 1rem; margin: 0.8rem 0 0.4rem 0; color: var(--text); }
.compact-row { display: flex; flex-direction: column; gap: 0.2rem; }
.archive-row { display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: 0.6rem 0; border-bottom: 1px dashed var(--line); }
.archive-row:last-child { border-bottom: none; }

body.view-timeline .notes-timeline { display: block; }
body.view-timeline .notes-compact { display: none; }

/* Footer navigation */
.footer-nav { display: flex; gap: 1rem; }
.footer-nav a { color: var(--muted); font-size: 0.85rem; }
.footer-nav a:hover { color: var(--accent); }
